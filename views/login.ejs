<%- extend("layout") -%>

<h1>Login to your account.</h1>

<form action="/login" method="POST">
    <label for="email">Email</label><br />
    <input required id="email" type="email" placeholder="Email" name="email"><br />
    <label for="password">Password</label><br />
    <input required id="password" type="password" placeholder="Password" name="password"><br />

    <button onsubmit="login()" type="submit">Login</button>
    <p><a class="forgot-password" href="/">Forgot password?</a></p>
    <p><a class="create-account" href="/signup">Create Account</a></p>
</form>

<script>
    async function login(event) {
        event.preventDefault()
        var email  = document.getElementById("email").value
        var password  = document.getElementById("password").value

        const response = fetch("http://127.0.0.1:8000/login", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({username, password})
        }).then( res => console.log(res.json))
    }
</script>